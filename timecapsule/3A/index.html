<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Resume | Andy Yun</title>

  <!-- JS가 여기 내용을 바꿔서 @page size를 확정합니다 -->
  <style id="pageStyle">
    @page { size: letter; margin: 0; }
  </style>

  <style>
    /* =========================================================
       2025-26 Print-stable Resume (EN + KO are separate templates)
       - Screen: preview + controls + tips (panel is web-only)
       - Print: ONLY the sheet content (no UI), 1-page stable
       ========================================================= */

    :root{
      /* Paper sizes */
      --w-a4: 210mm;   --h-a4: 297mm;
      --w-letter: 215.9mm; --h-letter: 279.4mm;

      /* Active paper (default = Letter) */
      --pageW: var(--w-letter);
      --pageH: var(--h-letter);

      /* Print padding */
      --padX: 11mm;
      --padY: 10mm;

      /* Fonts */
      --font-en: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --font-ko: ui-sans-serif, system-ui, -apple-system, "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", Segoe UI, Roboto, Helvetica, Arial;

      --text: #111214;
      --muted: #4b5563;
      --hair: rgba(17,18,20,.12);
      --chipBg: rgba(17,18,20,.05);

      /* Sheet look (screen only) */
      --sheetRadius: 14px;
      --sheetShadow: 0 20px 60px rgba(0,0,0,.22);

      /* EN default typography */
      --bodySize: 10.2px;
      --bodyLH: 1.24;
      --h2Size: 11.3px;
      --h2LH: 1.12;

      /* EN 2-col layout widths */
      --colGap: 9.5mm;
      --leftCol: 63%;
      --rightCol: 37%;
    }

    *, *::before, *::after{ box-sizing: border-box; }

    html, body { height: 100%; }
    body{
      margin: 0;
      font-family: var(--font-en);
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 15% 5%, rgba(255,255,255,.10), rgba(255,255,255,0)),
        radial-gradient(800px 500px at 80% 20%, rgba(255,255,255,.07), rgba(255,255,255,0)),
        #0b0f1a;
    }

    /* ===== App Shell ===== */
    .app{
      min-height: 100%;
      display: grid;
      grid-template-rows: auto 1fr;
    }

    .topbar{
      position: sticky;
      top: 0;
      z-index: 20;
      padding: 14px 14px 10px;
      backdrop-filter: blur(14px);
      background: rgba(10,12,18,.55);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }

    .topbar-inner{
      max-width: 1120px;
      margin: 0 auto;
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
    }

    .brand{
      display: flex;
      gap: 10px;
      align-items: center;
      color: rgba(255,255,255,.92);
    }
    .dot{
      width: 10px; height: 10px; border-radius: 999px;
      background: #3b82f6;
      box-shadow: 0 0 0 4px rgba(59,130,246,.18);
      flex: 0 0 auto;
    }
    .brand-title{ font-weight: 700; letter-spacing: -.01em; line-height: 1.05; }
    .brand-sub{ font-size: 12px; color: rgba(255,255,255,.68); margin-top: 2px; letter-spacing: -.01em; }

    .controls{
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .pill{
      display: inline-flex;
      gap: 8px;
      align-items: center;
      padding: 9px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      font-size: 12px;
      user-select: none;
    }
    .pill label { opacity: .72; }
    .pill select{
      font: inherit;
      color: inherit;
      border: 0;
      background: transparent;
      outline: none;
      cursor: pointer;
      padding-right: 2px;
    }

    .btn{
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(59,130,246,.45);
      background: rgba(59,130,246,.18);
      color: rgba(255,255,255,.95);
      cursor: pointer;
      font-size: 12px;
      font-weight: 700;
    }
    .btn:active{ transform: translateY(1px); }

    .main{ padding: 18px 14px 34px; }

    /* ===== Stage: keep sheet centered; panel floats (web-only) ===== */
    .stage{
      max-width: 1120px;
      margin: 0 auto;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 0;
      position: relative;
    }
    @media (max-width: 1040px){
      .stage{ display: block; }
    }

    /* ===== Sheet preview (screen) ===== */
    .sheet-wrap{
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }
    .sheet{
      width: var(--pageW);
      height: var(--pageH);
      background: #fff;
      border-radius: var(--sheetRadius);
      box-shadow: var(--sheetShadow);
      padding: var(--padY) var(--padX);
      overflow: hidden;
    }

    /* ===== Resume typography ===== */
    .resume{
      font-size: var(--bodySize);
      line-height: var(--bodyLH);
      letter-spacing: -0.01em;
    }

    .header{
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--hair);
      margin-bottom: 10px;
    }

    .name{
      font-size: 20px;
      font-weight: 850;
      letter-spacing: -0.02em;
      line-height: 1.05;
    }
    .headline{
      margin-top: 4px;
      font-size: 12px;
      font-weight: 700;
      color: var(--muted);
      letter-spacing: -0.01em;
    }
    .summary{
      margin-top: 6px;
      color: var(--text);
      font-size: 10.6px;
      line-height: 1.25;
    }

    /* IMPORTANT: allow wrapping to avoid horizontal spill in print */
    .contact{
      text-align: right;
      font-size: 10px;
      color: var(--muted);
      line-height: 1.35;
      white-space: normal;
      overflow-wrap: anywhere;
      word-break: break-word;
      max-width: 260px;
    }
    .contact a{ color: inherit; text-decoration: none; border-bottom: 1px dotted rgba(0,0,0,.25); }

    h2{
      margin: 0 0 6px 0;
      font-size: var(--h2Size);
      line-height: var(--h2LH);
      letter-spacing: .02em;
      text-transform: uppercase;
      color: #0f172a;
    }

    .sec{ margin-bottom: 10px; }
    .sec:last-child{ margin-bottom: 0; }

    .item{
      padding: 7px 0;
      border-top: 1px solid rgba(17,18,20,.08);
    }
    .item:first-child{ border-top: 0; padding-top: 0; }

    .row{
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;
      align-items: baseline;
    }
    .org{ font-weight: 850; }
    .role{ font-weight: 700; color: #111827; margin-top: 2px; }
    .meta{ color: var(--muted); font-size: 10px; }

    ul{ margin: 6px 0 0 0; padding-left: 16px; }
    li{ margin: 2px 0; }

    .chips{
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }
    .chip{
      font-size: 9.6px;
      line-height: 1;
      padding: 4px 7px;
      border-radius: 999px;
      border: 1px solid rgba(17,18,20,.10);
      background: var(--chipBg);
      color: rgba(17,18,20,.85);
      white-space: nowrap;
    }

    .kv{
      display: grid;
      gap: 6px;
    }
    .kv .k{
      font-weight: 800;
      color: #0f172a;
      font-size: 10.3px;
    }
    .kv .v{
      color: var(--muted);
      font-size: 10.1px;
      line-height: 1.25;
    }
    .kv .line{
      padding-top: 6px;
      border-top: 1px solid rgba(17,18,20,.08);
    }

    /* ===== EN layout (2-col) ===== */
    .grid.en{
      display: grid;
      grid-template-columns: var(--leftCol) var(--rightCol);
      gap: var(--colGap);
      margin-top: 10px;
    }

    /* ===== KO layout (A4, 1-col) ===== */
    body[data-lang="ko"]{
      font-family: var(--font-ko);
      --bodySize: 9.9px;
      --bodyLH: 1.22;
      --h2Size: 11.2px;
      --h2LH: 1.12;
      --padX: 12mm;
      --padY: 11mm;
    }
    body[data-lang="ko"] h2{
      text-transform: none;
      letter-spacing: -0.01em;
      font-weight: 900;
    }
    .grid.ko{
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    .ko-top-skills{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px 10px;
      padding: 8px 0 2px;
      border-top: 1px solid rgba(17,18,20,.08);
      border-bottom: 1px solid rgba(17,18,20,.08);
      margin-top: 10px;
    }
    .ko-top-skills .k{ font-weight: 900; font-size: 10.2px; color: #0f172a; }
    .ko-top-skills .v{ color: var(--muted); font-size: 10px; line-height: 1.25; }

    /* ===== Web-only help panel (floats) ===== */
    .panel{
      position: fixed;
      top: 86px;
      right: 16px;
      width: 340px;
      max-width: calc(100vw - 28px);
      padding: 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.90);
      box-shadow: 0 10px 30px rgba(0,0,0,.22);
      z-index: 10;
    }
    @media (max-width: 1040px){
      .panel{
        position: static;
        width: auto;
        max-width: 720px;
        margin: 16px auto 0;
      }
    }
    .panel h3{
      margin: 0 0 8px 0;
      font-size: 13px;
      letter-spacing: -.01em;
    }
    .panel p{
      margin: 0 0 10px 0;
      font-size: 12px;
      line-height: 1.35;
      color: rgba(255,255,255,.78);
    }
    .panel .hint{
      border-top: 1px solid rgba(255,255,255,.12);
      padding-top: 10px;
      margin-top: 10px;
      font-size: 12px;
      line-height: 1.35;
      color: rgba(255,255,255,.80);
    }
    .panel code{
      background: rgba(255,255,255,.10);
      padding: 2px 6px;
      border-radius: 8px;
      font-size: 11px;
    }

    /* ===== PRINT (ultra-stable / 1-page) ===== */
    @media print{
      @page{ margin: 0; }

      html, body{
        margin: 0 !important;
        padding: 0 !important;
        width: var(--pageW) !important;
        height: var(--pageH) !important;
        overflow: hidden !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
        background: #fff !important;
      }

      .topbar, .panel{ display: none !important; }
      .main{ padding: 0 !important; }

      .stage{ max-width: none !important; display: block !important; }
      .sheet-wrap{ display: block !important; }

      .sheet{
        border-radius: 0 !important;
        box-shadow: none !important;
        width: var(--pageW) !important;
        height: calc(var(--pageH) - 0.2mm) !important; /* 2페이지 빈 페이지 방지 */
        overflow: hidden !important;
      }

      .chips{ display: none !important; }

      .contact a{ border-bottom: 0 !important; text-decoration: none !important; }

      .sheet, .resume, .header, .grid{ break-inside: avoid; }
    }
  </style>
</head>

<body data-lang="en" data-paper="LETTER">
  <div class="app">
    <!-- ===== Topbar ===== -->
    <div class="topbar">
      <div class="topbar-inner">
        <div class="brand">
          <div class="dot"></div>
          <div>
            <div class="brand-title" id="brandTitle">Resume</div>
            <div class="brand-sub" id="brandSub">EN template · Print-stable</div>
          </div>
        </div>

        <div class="controls">
          <div class="pill">
            <label id="lblLang">Template</label>
            <select id="langSel">
              <option value="en">EN (2-col)</option>
              <option value="ko">KO (1-col)</option>
            </select>
          </div>

          <div class="pill" id="paperPill">
            <label id="lblPaper">Paper</label>
            <select id="paperSel">
              <option value="LETTER">US Letter</option>
              <option value="A4">A4</option>
            </select>
          </div>

          <button class="btn" id="printBtn" type="button">Print / Save PDF</button>
        </div>
      </div>
    </div>

    <!-- ===== Main ===== -->
    <div class="main">
      <div class="stage">
        <div class="sheet-wrap">
          <div class="sheet">
            <div class="resume" id="resumeRoot"></div>
          </div>
        </div>

        <!-- Web-only help panel -->
        <aside class="panel" id="helpPanel">
          <h3 id="helpTitle">Print tips</h3>
          <p id="helpBody"></p>
          <div class="hint" id="helpHint"></div>
        </aside>
      </div>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    const DATA = {
      en: {
        brandTitle: "Resume",
        helpTitle: "Print tips (Chrome / Safari)",
        helpBody: [
          "1) For North America, prefer US Letter unless instructed otherwise.",
          "2) In print dialog: turn OFF 'Headers and footers'.",
          "3) Set Margins = None (or Minimum), Scale = 100%."
        ],
        helpHint: "If an ATS is picky, you can switch to the KO 1-column layout style later, but this EN template stays print-stable.",
        headings: {
          experience: "Experience",
          skills: "Skills",
          projects: "Projects",
          education: "Education",
          service: "Service",
          volunteering: "Volunteering"
        },
        profile: {
          name: "Andy Yun",
          headline: "Backend / AI Tooling Engineer (Co-op / Intern)",
          summary:
            "Backend-focused ECE student shipping internal AI tooling and production backends. Led a Windows + FastAPI internal LLM assistant with governance (RBAC/audit/versioned distribution), a prompt marketplace, and leakage-risk monitoring for a ~50-person org."
        },
        contact: {
          siteLabel: "site",
          site: "git.io/JXa1p",
          email1: "andy.yun@uwaterloo.ca",
          email2: "a2yun@uwaterloo.ca",
          phone: "+1 (226) 507-9755"
        },
        experience: [
          {
            org: "Korea Fund Ratings (KFR)",
            role: "AI Researcher / Internal Tooling (Intern)",
            date: "Jan 2024 – Apr 2024",
            bullets: [
              "Built an internal LLM assistant for a ~50-person org: Windows desktop client (PySide6) + always-on FastAPI service.",
              "Implemented DB-backed governance: login, RBAC admin controls, versioned client distribution, and audit logging (usage/prompts + IP/MAC/app version).",
              "Shipped a prompt marketplace (~10 templates) with attribution/moderation; added A/B/C keyword thresholds to trigger admin alerts for leakage-risk indicators.",
              "Integrated internal sources (news, Excel, fund documents) via SQL Server connectors (SQLAlchemy/pyodbc); added optional local summarization to reduce token overflow and UI stalls."
            ],
            tech: ["Python","FastAPI","PySide6","SQLAlchemy","SQL Server","LangChain","OpenAI API","PyInstaller"]
          },
          {
            org: "Escape Platforms",
            role: "Software Backend Developer (Co-op)",
            date: "Jun 2023 – Aug 2023",
            bullets: [
              "Developed ~10 REST API endpoints (comments/chat/internal) and implemented serverless data flows on AWS.",
              "Built AppSync + Lambda + DynamoDB pipelines with Node.js/TypeScript; used GraphQL to streamline operations; shipped Jest tests."
            ],
            tech: ["TypeScript","Node.js","GraphQL","AWS AppSync","Lambda","DynamoDB","Jest"]
          },
          {
            org: "Huawei Technologies Canada",
            role: "6G R&D Engineer (Co-op)",
            date: "Sep 2022 – Dec 2022",
            bullets: [
              "Developed internal APIs (C++14/Boost) callable from Python; integrated with a CARLA server for simulation workflows.",
              "Built a PyQt GUI to monitor/control Unreal Engine simulation; implemented ray-tracing logic in a CARLA context."
            ],
            tech: ["C++14","Boost","Python","PyQt","CARLA","Unreal Engine"]
          },
          {
            org: "Stackpole International",
            role: "Software Developer (Co-op)",
            date: "Jan 2022 – Apr 2022",
            bullets: [
              "Reduced PLC↔Host communication overhead by ~30% via a caching mechanism.",
              "Built GUI + ML + telemetry tooling using Python (Qt), OpenCV, and PyTorch; supported PLC and GPU servers.",
              "Constructed a lightweight ANN model for Jetson Nano paired with PLC to reduce server load and improve response time."
            ],
            tech: ["Python","Qt","OpenCV","PyTorch","PLC","Jetson"]
          }
        ],
        projects: [
          {
            name: "Logic.Gate Tutoring Platform",
            meta: "2021 – Present",
            desc: [
              "STEM education platform; prototyping tutoring workflows and evaluation-first improvements with a reliability/UX focus."
            ],
            tech: ["RAG","Agents","Backend"]
          },
          {
            name: "Find My Pill Platform",
            meta: "Oct 2022 – Dec 2023",
            desc: [
              "Built REST API and data model; improved response time by ~23.7% via 3NF normalization.",
              "Designed a microservice-friendly architecture and a custom recommendation approach for user text input."
            ],
            tech: ["Python","Flask","SQL","REST"]
          }
        ],
        right: {
          skills: [
            { k: "Backend", v: "Python (FastAPI), Node.js/TypeScript, SQL, GraphQL, REST" },
            { k: "Cloud / Data", v: "AWS (Lambda/AppSync/DynamoDB), SQLAlchemy/pyodbc, UNIX/Linux" },
            { k: "AI Tooling", v: "LangChain, OpenAI API, local summarization option, governance/audit" },
            { k: "Systems", v: "C/C++ (Boost), Qt (PySide6/PyQt), packaging & internal distribution" }
          ],
          education: [
            { k: "University of Waterloo", v: "BASc Candidate, Computer Engineering (ECE) · Sep 2021 – Jun 2026" },
            { k: "Scholarship", v: "University of Waterloo President’s Scholarship (2021)" }
          ],
          service: [
            { k: "Republic of Korea Army", v: "Tactical C4I Maintenance & Operation · Sep 2024 – Mar 2026" }
          ],
          volunteering: [
            { k: "FIRST Robotics Team 7722", v: "Programming & Computing Mentor · Jan 2023 – Aug 2023" },
            { k: "", v: "Mentored 9 students in embedded programming, sensor fusion, and robot motion planning; improved autonomous movement reliability (reported 93% success)." }
          ]
        }
      },

      ko: {
        brandTitle: "이력서",
        helpTitle: "인쇄/저장 팁 (Chrome / Safari)",
        helpBody: [
          "1) 한국 기업 제출은 보통 A4를 권장합니다.",
          "2) 인쇄 옵션에서 ‘머리글/바닥글’은 OFF.",
          "3) 여백 = 없음(또는 최소), 배율 = 100% 권장.",
          "4) 제출처가 Letter를 요구하면 Paper를 Letter로 바꿔 출력하세요."
        ],
        helpHint: "KO 템플릿은 한글 전용 1열로 구성(2025–26 스타일)했고, 인쇄/PDF에는 이 패널이 포함되지 않습니다.",
        headings: {
          skillsTop: "핵심역량",
          experience: "경력",
          projects: "프로젝트",
          education: "학력",
          service: "병역",
          volunteering: "봉사/대외활동"
        },
        profile: {
          name: "윤홍준 (Andy Yun)",
          headline: "백엔드 · 사내 AI 업무도구/플랫폼 엔지니어",
          summary:
            "사내 비개발자도 바로 쓸 수 있는 AI 업무도구를 ‘운영 가능한 형태’로 설계·구현·배포해왔습니다. DB 기반 로그인/RBAC, 감사로그, 버전·배포, 유출 위험 키워드 감지(알림)까지 포함한 거버넌스 기능을 구축한 경험이 있습니다."
        },
        contact: {
          siteLabel: "웹",
          site: "git.io/JXa1p",
          email1: "andy.yun@uwaterloo.ca",
          email2: "a2yun@uwaterloo.ca",
          phone: "+1 (226) 507-9755"
        },
        topSkills: [
          { k: "백엔드", v: "Python(FastAPI), Node.js/TypeScript, SQL, REST, GraphQL" },
          { k: "데이터/연동", v: "SQL Server, SQLAlchemy/pyodbc, 문서·엑셀·뉴스 연동" },
          { k: "사내 AI 도구", v: "LangChain, OpenAI API, 로컬 요약 옵션, 프롬프트 마켓" },
          { k: "거버넌스/운영", v: "RBAC, 감사로그, 버전관리·배포, 위험 키워드 알림" }
        ],
        experience: [
          {
            org: "한국펀드평가 (KFR)",
            role: "AI 도입 연구원 / 사내 툴 개발 (인턴)",
            date: "2024.01 – 2024.04",
            bullets: [
              "약 50명 규모 조직 대상 사내 LLM 업무보조 도구(베타) 개발을 주도: Windows 데스크톱(PySide6) + FastAPI 서버(서버실 상시 구동).",
              "DB 기반 거버넌스 구축: 로그인/권한(RBAC), 버전관리·배포, 사용/프롬프트 감사로그(사용자·IP/MAC·앱 버전)로 컴플라이언스·디버깅 지원.",
              "프롬프트 마켓(약 10개 템플릿) 구축: 사용자 기여(작성자 표시) + 관리자 삭제/검수. 민감정보 유출 위험 A/B/C 키워드 임계치 초과 시 관리자 팝업/알림.",
              "뉴스/엑셀/펀드 설명서 등 내부 자료를 SQL Server 연동(SQLAlchemy/pyodbc)으로 조회하고, 로컬 LLM 요약 옵션을 추가해 토큰 초과·UI 멈춤 이슈를 완화."
            ],
            tech: ["Python","FastAPI","PySide6","SQLAlchemy","SQL Server","LangChain","OpenAI API","PyInstaller"]
          },
          {
            org: "Escape Platforms",
            role: "백엔드 개발 (Co-op)",
            date: "2023.06 – 2023.08",
            bullets: [
              "댓글/채팅/내부 기능 등 REST API(약 10개) 및 AWS 서버리스 데이터 플로우 구현.",
              "Node.js/TypeScript로 AppSync + Lambda + DynamoDB 파이프라인 구축, GraphQL 기반 운영 단순화 및 Jest 테스트로 신뢰성 강화."
            ],
            tech: ["TypeScript","Node.js","GraphQL","AWS AppSync","Lambda","DynamoDB","Jest"]
          },
          {
            org: "Huawei Technologies Canada",
            role: "6G R&D 엔지니어 (Co-op)",
            date: "2022.09 – 2022.12",
            bullets: [
              "Python에서 호출 가능한 내부 API(C++14/Boost) 개발 및 CARLA 서버 연동으로 시뮬레이션 워크플로우 구성.",
              "Unreal Engine 시뮬레이션 모니터링/제어 PyQt GUI 제작, CARLA 환경 레이 트레이싱 로직 구현."
            ],
            tech: ["C++14","Boost","Python","PyQt","CARLA","Unreal Engine"]
          },
          {
            org: "Stackpole International",
            role: "소프트웨어 개발 (Co-op)",
            date: "2022.01 – 2022.04",
            bullets: [
              "캐싱 메커니즘으로 PLC↔Host 통신 오버헤드 약 30% 절감.",
              "Python(Qt), OpenCV, PyTorch 기반 GUI/ML/텔레메트리 툴 개발, PLC 및 GPU 서버 운영 지원.",
              "Jetson Nano + PLC 환경에서 동작하는 경량 ANN 모델 구축으로 서버 부하 및 응답시간 개선."
            ],
            tech: ["Python","Qt","OpenCV","PyTorch","PLC","Jetson"]
          }
        ],
        projects: [
          {
            name: "Logic.Gate 튜터링 플랫폼",
            meta: "2021 – 현재",
            desc: [
              "STEM 교육 플랫폼: 튜터링 워크플로우를 프로토타이핑하고 평가 중심으로 개선(신뢰성/UX)."
            ],
            tech: ["RAG","에이전트","백엔드"]
          },
          {
            name: "Find My Pill 플랫폼",
            meta: "2022.10 – 2023.12",
            desc: [
              "REST API + 데이터 모델 구축, 3NF 정규화로 응답시간 약 23.7% 개선.",
              "마이크로서비스 친화 아키텍처 및 텍스트 입력 기반 추천 로직 설계."
            ],
            tech: ["Python","Flask","SQL","REST"]
          }
        ],
        education: [
          { k: "워털루 대학교", v: "공학사 과정(Computer Engineering, ECE) · 2021.09 – 2026.06" },
          { k: "장학", v: "University of Waterloo President’s Scholarship (2021)" }
        ],
        service: [
          { k: "대한민국 육군", v: "전술 C4I 정비/운용 · 2024.09 – 2026.03" }
        ],
        volunteering: [
          { k: "FIRST 로보틱스 팀 7722", v: "프로그래밍/컴퓨팅 멘토 · 2023.01 – 2023.08" },
          { k: "", v: "고등학생 9명 대상 임베디드/센서퓨전/모션플래닝 멘토링, 자율주행 신뢰성 향상(보고 성공률 93%)." }
        ]
      }
    };

    const state = { lang: "en", paper: "LETTER" };

    function setPaperVars(paper){
      const root = document.documentElement.style;
      if(paper === "A4"){
        root.setProperty("--pageW", "var(--w-a4)");
        root.setProperty("--pageH", "var(--h-a4)");
      } else {
        root.setProperty("--pageW", "var(--w-letter)");
        root.setProperty("--pageH", "var(--h-letter)");
      }
    }

    function applyPageRule(){
      const page = (state.paper === "A4") ? "A4" : "letter";
      $("pageStyle").textContent = `@page { size: ${page}; margin: 0; }`;
    }

    function escapeHtml(s){
      return (s ?? "").replace(/[&<>"']/g, (c)=>({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
      }[c]));
    }

    function buildContact(c, lang){
      const siteUrl = `https://${c.site}`;
      const phoneLabel = (lang === "ko") ? "전화" : "phone";
      const emailLabel = (lang === "ko") ? "이메일" : "email";
      return `
        <div>${escapeHtml(c.siteLabel)}: <a href="${escapeHtml(siteUrl)}" target="_blank" rel="noopener">${escapeHtml(c.site)}</a></div>
        <div>${emailLabel}: <a href="mailto:${escapeHtml(c.email1)}">${escapeHtml(c.email1)}</a></div>
        <div><a href="mailto:${escapeHtml(c.email2)}">${escapeHtml(c.email2)}</a></div>
        <div>${phoneLabel}: ${escapeHtml(c.phone)}</div>
      `;
    }

    function buildEN(d){
      const h = d.headings;
      const p = d.profile;
      const c = d.contact;

      const exp = d.experience.map(job => `
        <div class="item">
          <div class="row">
            <div>
              <div class="org">${escapeHtml(job.org)}</div>
              <div class="role">${escapeHtml(job.role)}</div>
            </div>
            <div class="meta">${escapeHtml(job.date)}</div>
          </div>
          <ul>${job.bullets.map(b => `<li>${escapeHtml(b)}</li>`).join("")}</ul>
          <div class="chips">${job.tech.map(t => `<span class="chip">${escapeHtml(t)}</span>`).join("")}</div>
        </div>
      `).join("");

      const projects = d.projects.map(pr => `
        <div class="item">
          <div class="row">
            <div>
              <div class="org">${escapeHtml(pr.name)}</div>
              <div class="role">${escapeHtml(pr.desc?.[0] ?? "")}</div>
            </div>
            <div class="meta">${escapeHtml(pr.meta)}</div>
          </div>
          ${pr.desc && pr.desc.length > 1 ? `<ul>${pr.desc.slice(1).map(x => `<li>${escapeHtml(x)}</li>`).join("")}</ul>` : ``}
          <div class="chips">${pr.tech.map(t => `<span class="chip">${escapeHtml(t)}</span>`).join("")}</div>
        </div>
      `).join("");

      const skills = d.right.skills.map(x => `
        <div>
          <div class="k">${escapeHtml(x.k)}</div>
          <div class="v">${escapeHtml(x.v)}</div>
        </div>
      `).join("");

      const edu = d.right.education.map((x,i) => `
        <div class="${i===0?"":"line"}">
          <div class="k">${escapeHtml(x.k)}</div>
          <div class="v">${escapeHtml(x.v)}</div>
        </div>
      `).join("");

      const svc = d.right.service.map((x,i) => `
        <div class="${i===0?"":"line"}">
          <div class="k">${escapeHtml(x.k)}</div>
          <div class="v">${escapeHtml(x.v)}</div>
        </div>
      `).join("");

      const vol = d.right.volunteering.map((x,i) => `
        <div class="${i===0?"":"line"}">
          ${x.k ? `<div class="k">${escapeHtml(x.k)}</div>` : ``}
          <div class="v">${escapeHtml(x.v)}</div>
        </div>
      `).join("");

      return `
        <div class="header">
          <div>
            <div class="name">${escapeHtml(p.name)}</div>
            <div class="headline">${escapeHtml(p.headline)}</div>
            <div class="summary">${escapeHtml(p.summary)}</div>
          </div>
          <div class="contact">${buildContact(c,"en")}</div>
        </div>

        <div class="grid en">
          <div>
            <div class="sec">
              <h2>${escapeHtml(h.experience)}</h2>
              ${exp}
            </div>
            <div class="sec">
              <h2>${escapeHtml(h.projects)}</h2>
              ${projects}
            </div>
          </div>

          <div>
            <div class="sec">
              <h2>${escapeHtml(h.skills)}</h2>
              <div class="kv">${skills}</div>
            </div>
            <div class="sec">
              <h2>${escapeHtml(h.education)}</h2>
              <div class="kv">${edu}</div>
            </div>
            <div class="sec">
              <h2>${escapeHtml(h.service)}</h2>
              <div class="kv">${svc}</div>
            </div>
            <div class="sec">
              <h2>${escapeHtml(h.volunteering)}</h2>
              <div class="kv">${vol}</div>
            </div>
          </div>
        </div>
      `;
    }

    function buildKO(d){
      const h = d.headings;
      const p = d.profile;
      const c = d.contact;

      const topSkills = d.topSkills.map(x => `
        <div>
          <div class="k">${escapeHtml(x.k)}</div>
          <div class="v">${escapeHtml(x.v)}</div>
        </div>
      `).join("");

      const exp = d.experience.map(job => `
        <div class="item">
          <div class="row">
            <div>
              <div class="org">${escapeHtml(job.org)}</div>
              <div class="role">${escapeHtml(job.role)}</div>
            </div>
            <div class="meta">${escapeHtml(job.date)}</div>
          </div>
          <ul>${job.bullets.map(b => `<li>${escapeHtml(b)}</li>`).join("")}</ul>
          <div class="chips">${job.tech.map(t => `<span class="chip">${escapeHtml(t)}</span>`).join("")}</div>
        </div>
      `).join("");

      const projects = d.projects.map(pr => `
        <div class="item">
          <div class="row">
            <div>
              <div class="org">${escapeHtml(pr.name)}</div>
              <div class="role">${escapeHtml(pr.desc?.[0] ?? "")}</div>
            </div>
            <div class="meta">${escapeHtml(pr.meta)}</div>
          </div>
          ${pr.desc && pr.desc.length > 1 ? `<ul>${pr.desc.slice(1).map(x => `<li>${escapeHtml(x)}</li>`).join("")}</ul>` : ``}
          <div class="chips">${pr.tech.map(t => `<span class="chip">${escapeHtml(t)}</span>`).join("")}</div>
        </div>
      `).join("");

      const edu = d.education.map((x,i) => `
        <div class="${i===0?"":"line"}">
          <div class="k">${escapeHtml(x.k)}</div>
          <div class="v">${escapeHtml(x.v)}</div>
        </div>
      `).join("");

      const svc = d.service.map((x,i) => `
        <div class="${i===0?"":"line"}">
          <div class="k">${escapeHtml(x.k)}</div>
          <div class="v">${escapeHtml(x.v)}</div>
        </div>
      `).join("");

      const vol = d.volunteering.map((x,i) => `
        <div class="${i===0?"":"line"}">
          ${x.k ? `<div class="k">${escapeHtml(x.k)}</div>` : ``}
          <div class="v">${escapeHtml(x.v)}</div>
        </div>
      `).join("");

      return `
        <div class="header">
          <div>
            <div class="name">${escapeHtml(p.name)}</div>
            <div class="headline">${escapeHtml(p.headline)}</div>
            <div class="summary">${escapeHtml(p.summary)}</div>
          </div>
          <div class="contact">${buildContact(c,"ko")}</div>
        </div>

        <div class="ko-top-skills" aria-label="${escapeHtml(h.skillsTop)}">
          ${topSkills}
        </div>

        <div class="grid ko">
          <div class="sec">
            <h2>${escapeHtml(h.experience)}</h2>
            ${exp}
          </div>

          <div class="sec">
            <h2>${escapeHtml(h.projects)}</h2>
            ${projects}
          </div>

          <div class="sec">
            <h2>${escapeHtml(h.education)}</h2>
            <div class="kv">${edu}</div>
          </div>

          <div class="sec">
            <h2>${escapeHtml(h.service)}</h2>
            <div class="kv">${svc}</div>
          </div>

          <div class="sec">
            <h2>${escapeHtml(h.volunteering)}</h2>
            <div class="kv">${vol}</div>
          </div>
        </div>
      `;
    }

    function setBrandSub(){
      const lang = state.lang;
      const paper = state.paper === "A4" ? "A4" : "US Letter";
      const template = (lang === "ko") ? "KO template (1-col)" : "EN template (2-col)";
      $("brandSub").textContent = `${template} · Paper: ${paper} · Print-stable`;
    }

    function render(){
      const d = DATA[state.lang];

      document.body.dataset.lang = state.lang;
      document.body.dataset.paper = state.paper;

      setPaperVars(state.paper);
      applyPageRule();
      setBrandSub();

      $("brandTitle").textContent = d.brandTitle;

      $("helpTitle").textContent = d.helpTitle;
      $("helpBody").innerHTML = d.helpBody.map(x => escapeHtml(x)).join("<br/>");
      $("helpHint").textContent = d.helpHint;

      $("paperSel").value = state.paper;

      $("resumeRoot").innerHTML = (state.lang === "ko") ? buildKO(d) : buildEN(d);
    }

    $("langSel").addEventListener("change", (e)=>{
      state.lang = e.target.value;
      state.paper = (state.lang === "ko") ? "A4" : "LETTER";
      render();
    });

    $("paperSel").addEventListener("change", (e)=>{
      state.paper = e.target.value;
      render();
    });

    window.addEventListener("beforeprint", ()=> applyPageRule());
    const mql = window.matchMedia("print");
    mql.addEventListener?.("change", (e)=>{ if(e.matches) applyPageRule(); });

    async function safePrint(){
      applyPageRule();
      try{ if(document.fonts && document.fonts.ready) await document.fonts.ready; }catch(e){}
      await new Promise(r => requestAnimationFrame(()=> r()));
      setTimeout(()=> window.print(), 60);
    }

    $("printBtn").addEventListener("click", ()=> safePrint() );

    function init(){
      $("langSel").value = state.lang;
      $("paperSel").value = state.paper;
      render();
    }
    init();
  </script>
</body>
</html>